---
// Assets
import { Image } from "astro:assets";
import Logo from "@/images/logoWhite.svg";
// Fundation
import Text from "../fundations/elements/Text.astro";
import Wrapper from "../fundations/containers/Wrapper.astro";
const legalLinks = [
  { href: "/infopages/terms", text: "Terms & policies" },
  { href: "/infopages/", text: "Privacy policy" },
];
const socialLinks = [
  { text: "Twitter", href: "#" },
  { text: "YouTube", href: "#" },
  { text: "GitHub", href: "#" },
  { text: "SoundCloud", href: "#" },
  { text: "LinkedIn", href: "#" },
];
---

<style>
  #waveContainer {
    /* 
    // Ensures that content 
    // outside the container is not visible 
    */
    overflow: hidden;
    /* 
    // Sets the height of the  
    // container for the wave effect 
    */
    height: 200px;
  }
  .wave-segment {
    /* 
    // Each wave segment 
    // is white in color 
    */
    background-color: #ffffff;
    /* 
    // Smooth transition when 
    // the margin or height changes 
    */
    transition: all 0.1s ease;
  }
</style>
<footer
  x-data="{ year: new Date().getFullYear() }"
  class="bg-black text-white relative lg:h-svh flex flex-col w-full h-full justify-between"
>
  <Wrapper
    class="flex flex-col md:flex-row justify-between w-full gap-4 pb-24 pt-8"
  >
    <!-- Left Column -->
    <div class="space-y-2">
      <ul class="flex flex-wrap gap-4">
        {
          legalLinks.map((link) => (
            <li>
              <Text
                tag="a"
                variant="textSM"
                href={link.href}
                class="hover:text-accent-400"
              >
                {link.text}
              </Text>
            </li>
          ))
        }
      </ul>
      <Text
        tag="p"
        variant="textSM"
        x-data="{ year: new Date().getFullYear() }"
        class="mt-4">
        Â© <span x-text="year"></span> yrx.io
      </Text>
    </div>
    <!-- Right Column -->
    <div class="space-y-4">
      <ul class="flex flex-wrap gap-4">
        {
          socialLinks.map((link) => (
            <li>
              <Text
                tag="a"
                variant="textSM"
                href={link.href}
                class="hover:text-accent-400"
              >
                {link.text}
              </Text>
            </li>
          ))
        }
      </ul>
      <div class="text-right mt-4">
        <a href="#top" class="text-sm hover:underline inline-flex items-center">
          Back to top
        </a>
      </div>
    </div>
  </Wrapper>
  <div id="waveContainer" aria-hidden="true">
    <!-- 
    // Container for the wave effect; 
    // aria-hidden ensures it's 
    // not accessible by screen readers 
    -->
    <div style="margin-top:0px">
      <!-- 
      // Individual wave segments follow; 
      // margin-top and height define 
      // their position and size 
      -->
      <div class="wave-segment" style="margin-top:0px;height:1px"></div>
      <div class="wave-segment" style="margin-top:1px;height:2px"></div>
      <div class="wave-segment" style="margin-top:2px;height:3px"></div>
      <div class="wave-segment" style="margin-top:3px;height:4px"></div>
      <div class="wave-segment" style="margin-top:4px;height:5px"></div>
      <div class="wave-segment" style="margin-top:5px;height:6px"></div>
      <div class="wave-segment" style="margin-top:6px;height:7px"></div>
      <div class="wave-segment" style="margin-top:7px;height:8px"></div>
      <div class="wave-segment" style="margin-top:8px;height:9px"></div>
      <div class="wave-segment" style="margin-top:9px;height:10px"></div>
      <div class="wave-segment" style="margin-top:10px;height:11px"></div>
      <div class="wave-segment" style="margin-top:11px;height:12px"></div>
      <div class="wave-segment" style="margin-top:12px;height:13px"></div>
      <div class="wave-segment" style="margin-top:13px;height:14px"></div>
      <div class="wave-segment" style="margin-top:14px;height:15px"></div>
      <div class="wave-segment" style="margin-top:15px;height:16px"></div>
      <div class="wave-segment" style="margin-top:16px;height:17px"></div>
      <div class="wave-segment" style="margin-top:17px;height:18px"></div>
      <div class="wave-segment" style="margin-top:18px;height:19px"></div>
      <div class="wave-segment" style="margin-top:19px;height:20px"></div>
      <div class="wave-segment" style="margin-top:20px;height:21px"></div>
      <div class="wave-segment" style="margin-top:21px;height:22px"></div>
      <div class="wave-segment" style="margin-top:22px;height:23px"></div>
    </div>
  </div>
</footer>
<script type="module">
  document.addEventListener("DOMContentLoaded", () => {
    const waveSegments = document.querySelectorAll(".wave-segment");
    // Controls the phase of the wave animation
    let wavePhase = 0;
    function animateWave() {
      // Calculate a vertical offset for each wave segment using the sine function
      waveSegments.forEach((segment, index) => {
        // '0.3' adjusts the wavelength, and '20' sets the amplitude (max vertical displacement)
        const offset = Math.sin((wavePhase + index) * 0.3) * 20;
        // Applies the calculated offset to the `margin-top` property
        //
        // `Math.max(0, offset)` ensures no negative values, keeping segments aligned at the top
        segment.style.marginTop = `${Math.max(0, offset)}px`;
      });
      // Increments the phase to create the motion (adjusts animation speed)
      wavePhase += 0.1;
      // Recursively calls `animateWave` for smooth, frame-based animation
      requestAnimationFrame(animateWave);
    }
    // Starts the wave animation
    animateWave();
  });
</script>
